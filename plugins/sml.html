
  
  
 
  
 


<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Sml &mdash; SmartHome.py 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/3.0.0/spacelab/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="SmartHome.py 1.0 documentation" href="../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">SmartHome.py</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="../install.html">Install</a></li>
                <li><a href="../config.html">Config</a></li>
                <li><a href="../logic.html">Logics</a></li>
                <li><a href="../plugin.html">Plugins</a></li>
                <li><a href="https://github.com/mknx/smarthome/issues?state=open">Bugs</a></li>
                <li><a href="https://github.com/mknx/smarthome/wiki">Wiki</a></li>
                <li><a href="https://github.com/mknx/smarthome/releases">Download</a></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Sml</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a><ul>
<li><a class="reference internal" href="#hardware">Hardware</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#plugin-conf">plugin.conf</a></li>
<li><a class="reference internal" href="#items-conf">items.conf</a><ul>
<li><a class="reference internal" href="#sml-obis">sml_obis</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#logic-conf">logic.conf</a></li>
</ul>
</li>
<li><a class="reference internal" href="#methodes">Methodes</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="sml">
<h1>Sml<a class="headerlink" href="#sml" title="Permalink to this headline">¶</a></h1>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>To use this plugin for reading data from your smart power meter hardware
you need to have a serial or network interface connected to your
hardware.</p>
<p>Most smart power meter hardware have an optical interface on the front
of the casis. These are two IR LEDs which can be used to read data from
the power meter hardware (e.g. by using a <a class="reference external" href="http://wiki.volkszaehler.org/hardware/controllers/ir-schreib-lesekopf">optical
reader</a>
connected to an USB port).</p>
<div class="section" id="hardware">
<h3>Hardware<a class="headerlink" href="#hardware" title="Permalink to this headline">¶</a></h3>
<p>The plugin was tested with the following hardware:</p>
<ul class="simple">
<li>Hager EHZ363Z5</li>
<li>Hager EHZ363W5</li>
</ul>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="plugin-conf">
<h3>plugin.conf<a class="headerlink" href="#plugin-conf" title="Permalink to this headline">¶</a></h3>
<pre>
[sml]
  class_name = Sml
  class_path = plugins.sml
  serialport = /dev/ttyUSB0
  # host = 192.168.2.1
  # port = 1234

</pre><p>The plugin reads data from smart power meter hardware by using a serial
interface (e.g. /dev/ttyUSB0) or by connecting to a host/port. It reads
messages using the SML (Smart Message Language) protocol. If you want to
know more about the protocol see
<a class="reference external" href="http://wiki.volkszaehler.org/software/sml">here</a>.</p>
<p>Usually the smart power meter hardware is sending status information
every few seconds via the interface which is read by the plugin. This
status information, consisting of a SML_PublicOpen and SML_GetList
message, provides the current power status and details (e.g. total power
consumed, current power).</p>
<p>All status values retrieved by these messages have a unique identifier
which is called <a class="reference external" href="http://de.wikipedia.org/wiki/OBIS-Kennzahlen">OBIS</a>
code. This can be used to identify the meaning of the value returned.</p>
<p>Description of the attributes:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">serialport</span></tt> - defines the serial port to use to read data from</li>
<li><tt class="docutils literal"><span class="pre">host</span></tt> - instead of serial port you can use a network connection</li>
<li><tt class="docutils literal"><span class="pre">port</span></tt> - additionally to the host configuration you can specify a
port</li>
</ul>
</div>
<div class="section" id="items-conf">
<h3>items.conf<a class="headerlink" href="#items-conf" title="Permalink to this headline">¶</a></h3>
<p>You can assign a value retrieved by the plugin to some of your items
using the OBIS identifier.</p>
<p>Here&#8217;s a list of OBIS codes which may be useful:</p>
<ul class="simple">
<li>129-129:199.130.3*255 - Manufacturer</li>
<li>1-0:0.0.9*255 - ServerId / serial number</li>
<li>1-0:1.8.0*255 - Total kWh consumption (in)</li>
<li>1-0:1.8.1*255 - Tariff 1 kWh consumption (in)</li>
<li>1-0:1.8.2*255 - Tariff 2 kWh consumption (in)</li>
<li>1-0:2.8.0*255 - Total kWh delivery (out)</li>
<li>1-0:2.8.1*255 - Tariff 1 kWh delivery (out)</li>
<li>1-0:2.8.2*255 - Tariff 2 kWh delivery (out)</li>
<li>1-0:16.7.0*255 - Current Delivery Watt (out)</li>
</ul>
<div class="section" id="sml-obis">
<h4>sml_obis<a class="headerlink" href="#sml-obis" title="Permalink to this headline">¶</a></h4>
<p>This assigns the value for the given OBIS code to the item.</p>
<p>e.g. sml_obis = 1-0:1.8.0*255</p>
</div>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>Here you can find a sample configuration:</p>
<pre>
[power]
  [[home]]
    [[[total]]]
      type = num
      sml_obis = 1-0:1.8.0*255
    [[[current]]]
      type = num
      sml_obis = 1-0:16.7.0*255
</pre></div>
</div>
<div class="section" id="logic-conf">
<h3>logic.conf<a class="headerlink" href="#logic-conf" title="Permalink to this headline">¶</a></h3>
<p>Currently there is no logic configuration for this plugin.</p>
</div>
</div>
<div class="section" id="methodes">
<h2>Methodes<a class="headerlink" href="#methodes" title="Permalink to this headline">¶</a></h2>
<p>Currently there are no functions offered from this plugin.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2011-2013, Marcus Popp.<br/>
    </p>
  </div>
</footer>
  </body>
</html>